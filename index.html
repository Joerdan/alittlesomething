<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Love Quest - A Game Just For You ‚ú®</title>
  <style>
    /* ========== Base Reset ========== */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* ========== Page Background ========== */
    body {
      font-family: Georgia, serif;
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 25%, #fecfef 75%, #ffd194 100%);
      min-height: 100vh;
      overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
      color: #3b2f4a;
    }

    /* ========== Floating Hearts ========== */
    .hearts { position: fixed; pointer-events: none; z-index: 1200; inset: 0; }
    .heart {
      position: absolute;
      font-size: 18px;
      animation: float 3.6s ease-in-out forwards;
      filter: drop-shadow(0 6px 14px rgba(0,0,0,0.15));
    }
    @keyframes float {
      0%   { transform: translateY(90vh) rotate(0deg); opacity: 0; }
      10%  { opacity: 1; }
      100% { transform: translateY(-80px) rotate(360deg); opacity: 0; }
    }

    /* ========== Container ========== */
    .container {
      max-width: 860px;
      margin: 0 auto;
      padding: 20px 16px 80px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ========== Card ========== */
    .game-screen {
      width: 100%;
      max-width: 640px;
      background: rgba(255,255,255,0.94);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 22px;
      padding: 28px;
      text-align: center;
      backdrop-filter: blur(8px);
      box-shadow: 0 24px 60px rgba(0,0,0,0.12);
      transition: transform .25s ease, box-shadow .25s ease;
    }
    .game-screen:focus-within { transform: translateY(-2px); }

    .hidden { display: none; }

    /* ========== Headings and Text ========== */
    h1 { color: #d63384; font-size: 2.2rem; margin-bottom: 16px; text-wrap: balance; }
    h2 { color: #d63384; font-size: 1.8rem; margin-bottom: 14px; }
    p  { color: #6f42c1; font-size: 1.1rem; margin-bottom: 14px; line-height: 1.6; }

    /* ========== Buttons ========== */
    .btn {
      background: linear-gradient(45deg, #ff6b9d, #c44569);
      color: white;
      border: 0;
      padding: 14px 22px;
      font-size: 1rem;
      border-radius: 26px;
      cursor: pointer;
      transition: transform .16s ease, box-shadow .2s ease;
      box-shadow: 0 10px 24px rgba(196,69,105,0.35);
      margin: 8px;
      touch-action: manipulation;
      user-select: none;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 14px 28px rgba(196,69,105,0.42); }
    .btn:active { transform: scale(0.98); }

    /* ========== Audio Controls ========== */
    .audio-controls {
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 1300;
      display: flex;
      gap: 8px;
    }
    .audio-btn {
      background: rgba(255,255,255,0.96);
      border: 0;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 1.25rem;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      touch-action: manipulation;
      user-select: none;
    }

    /* ========== Progress Bar ========== */
    .progress-bar {
      width: 100%;
      height: 16px;
      background: rgba(255,255,255,0.55);
      border-radius: 8px;
      margin: 14px 0 18px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(45deg, #ff6b9d, #c44569);
      width: 0%;
      transition: width .6s ease;
      border-radius: 8px;
    }

    /* ========== Flirty Message ========== */
    .flirty-message {
      background: linear-gradient(45deg, #ff6b9d, #c44569);
      color: white;
      padding: 14px;
      border-radius: 14px;
      margin: 16px 0;
      font-style: italic;
    }

    /* ========== Riddles ========== */
    .riddle-options {
      display: grid;
      gap: 10px;
      margin-top: 14px;
    }
    .riddle-btn {
      background: rgba(255,255,255,0.94);
      color: #6f42c1;
      border: 2px solid #d63384;
      padding: 12px 16px;
      border-radius: 14px;
      cursor: pointer;
      transition: background .2s ease, color .2s ease, transform .08s ease;
      touch-action: manipulation;
    }
    .riddle-btn:hover { background: #d63384; color: white; }
    .riddle-btn:active { transform: scale(0.98); }

    /* ========== Memory Game ========== */
    .memory-game {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
      margin: 16px auto;
      max-width: 420px;
    }
    .memory-card {
      width: 80px;
      height: 80px;
      background: linear-gradient(45deg, #ff6b9d, #c44569);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      color: white;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      transition: transform .12s ease;
      touch-action: manipulation;
    }
    .memory-card:active { transform: scale(0.96); }
    .memory-card.flipped { background: rgba(255,255,255,0.98); color: #d63384; }
    .memory-card.matched { background: #28a745; color: white; }

    /* ========== Maze ========== */
    .maze {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
      max-width: 320px;
      margin: 16px auto;
    }
    .maze-cell {
      width: 40px; height: 40px;
      border: 1px solid #ececec;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      touch-action: manipulation;
      user-select: none;
    }
    .maze-wall  { background: #333; }
    .maze-path  { background: rgba(255,255,255,0.96); }
    .maze-end   { background: #dc3545; color: #fff; }
    .maze-player{ background: #ff6b9d !important; color: #fff; }

    /* ========== Cipher ========== */
    .cipher-input {
      padding: 14px;
      font-size: 1.05rem;
      border: 2px solid #d63384;
      border-radius: 10px;
      text-align: center;
      margin: 12px 0 6px;
      width: 100%; max-width: 320px;
    }

    /* ========== Prize Box ========== */
    .prize-container {
      text-align: left;
      background: linear-gradient(45deg, #ffd194, #ff9a9e);
      padding: 24px;
      border-radius: 14px;
      margin: 16px 0;
      color: #4a3563;
    }

    /* ========== Toast Compliments ========== */
    .toast {
      position: fixed;
      right: 16px;
      bottom: 18px;
      background: linear-gradient(45deg, #ff6b9d, #c44569);
      color: #fff;
      border-radius: 12px;
      padding: 12px 14px;
      z-index: 1400;
      box-shadow: 0 10px 24px rgba(0,0,0,0.18);
      animation: toastIn .25s ease-out;
      max-width: 86vw;
      font-size: 0.98rem;
    }
    @keyframes toastIn {
      from { transform: translateY(12px); opacity: 0; }
      to   { transform: translateY(0); opacity: 1; }
    }

    /* ========== Mobile Tweaks ========== */
    @media (max-width: 600px) {
      .game-screen { padding: 22px; }
      h1 { font-size: 1.8rem; }
      .memory-game { grid-template-columns: repeat(3, 1fr); }
      .memory-card { width: 72px; height: 72px; font-size: 1.4rem; }
    }
  </style>
</head>
<body>
  <!-- Audio Controls -->
  <div class="audio-controls">
    <button class="audio-btn" id="music-btn" aria-label="Toggle music">üéµ</button>
    <button class="audio-btn" id="sound-btn" aria-label="Toggle sounds">üîä</button>
  </div>

  <!-- Background Music (your file only) -->
  <audio id="bg-loop" preload="auto" loop>
    <source src="./assets/musicgame.mp3" type="audio/mpeg" />
    <source src="./assets/musicgame.ogg" type="audio/ogg" />
  </audio>

  <!-- Floating hearts layer -->
  <div class="hearts" id="hearts"></div>

  <div class="container">
    <!-- Welcome -->
    <div class="game-screen" id="welcome">
      <h1>‚ú® A Special Quest Awaits You, Beautiful ‚ú®</h1>
      <p>Your love created something magical just for you. Ready to play and discover how incredible you are</p>
      <div class="flirty-message">I cannot wait to see that gorgeous smile when you finish this üòç</div>
      <button class="btn" id="start-btn">Start Your Adventure üíï</button>
      <div style="margin-top:10px;">
        Want a compliment right now
        <button class="btn" id="boost-btn" style="padding:8px 12px; font-size:.92rem;">Compliment Boost</button>
      </div>
    </div>

    <!-- Level 1a -->
    <div class="game-screen hidden" id="level1a">
      <h2>üíù Level 1</h2>
      <div class="progress-bar"><div class="progress-fill" id="progress1a" style="width: 20%;"></div></div>
      <p>What do I call you that makes you blush every time</p>
      <div class="riddle-options">
        <button class="riddle-btn" data-correct="false">Babe</button>
        <button class="riddle-btn" data-correct="false">Honey</button>
        <button class="riddle-btn" data-correct="true">My sexy little slut</button>
        <button class="riddle-btn" data-correct="false">Sweetheart</button>
      </div>
      <div id="fb1a" style="margin-top:10px;"></div>
      <button class="btn hidden" id="to-1b">Next ‚ûú</button>
    </div>

    <!-- Level 1b -->
    <div class="game-screen hidden" id="level1b">
      <h2>üíù Level 1</h2>
      <div class="progress-bar"><div class="progress-fill" id="progress1b" style="width: 40%;"></div></div>
      <p>What were you cooking the first day we met</p>
      <div class="riddle-options">
        <button class="riddle-btn" data-correct="false">Brownies</button>
        <button class="riddle-btn" data-correct="false">Chocolate cake</button>
        <button class="riddle-btn" data-correct="true">Apricot turnover</button>
        <button class="riddle-btn" data-correct="false">Apple pie</button>
      </div>
      <div id="fb1b" style="margin-top:10px;"></div>
      <button class="btn hidden" id="to-2">Next Level ‚ûú</button>
    </div>

    <!-- Level 2 -->
    <div class="game-screen hidden" id="level2">
      <h2>üíï Level 2: Memory Match</h2>
      <div class="progress-bar"><div class="progress-fill" id="progress2" style="width: 60%;"></div></div>
      <p>Match the pairs. Each match reveals how amazing you are</p>
      <div class="flirty-message" id="memory-message">That beautiful brain of yours is so sexy when you focus</div>
      <div class="memory-game" id="memory-grid"></div>
    </div>

    <!-- Level 3 -->
    <div class="game-screen hidden" id="level3">
      <h2>üåπ Level 3: Maze</h2>
      <div class="progress-bar"><div class="progress-fill" id="progress3" style="width: 80%;"></div></div>
      <p>Guide the heart to the rose. Tap on the path to move</p>
      <div class="flirty-message">You are as beautiful as you are smart</div>
      <div class="maze" id="maze-grid"></div>
      <div id="maze-msg" style="margin-top:10px;"></div>
    </div>

    <!-- Level 4 -->
    <div class="game-screen hidden" id="level4">
      <h2>üîê Level 4: Secret Code</h2>
      <div class="progress-bar"><div class="progress-fill" id="progress4" style="width: 95%;"></div></div>
      <p>Decode this message A=1, B=2, C=3</p>
      <div style="font-size:1.4rem; font-weight:700; color:#d63384; margin:12px 0;">19-13-9-12-5   2-1-2-25</div>
      <input type="text" class="cipher-input" id="cipher-in" placeholder="Enter the decoded message..." />
      <button class="btn" id="cipher-btn">Decode My Love üíù</button>
      <div id="cipher-fb" style="margin-top:8px;"></div>
    </div>

    <!-- Final Prize -->
    <div class="game-screen hidden" id="final">
      <h2>üéâ You Did It, Beautiful üéâ</h2>
      <div class="progress-bar"><div class="progress-fill" style="width: 100%;"></div></div>
      <div class="prize-container">
        <h3 style="color:#d63384; text-align:center;">üíï Your Love Letter Prize üíï</h3>
        <p>Hey Baby, even though I cannot see it, I know that there is a huge smile on your beautiful face right now. I just want you to know that I love you, and I am here for you. I am really proud of you and I am certain that everything is going to be okay.</p>
        <br />
        <p>Now send me bikini and sexy pics üòè</p>
        <br />
        <p>Much love, your man &lt;3</p>
      </div>
      <button class="btn" id="celebrate">üéä Celebrate üéä</button>
      <button class="btn" id="restart">Play Again üíñ</button>
    </div>
  </div>

  <script>
    /* ========== Personalization ========== */
    const PERSONALIZATION = {
      herName: "My gorgeous girl",
      yourPetName: "My sexy little slut",
      secretWord: "smile baby", // lowercased for check
      compliments: [
        "Your laugh melts me and I want more of it",
        "That smile of yours is dangerous and I love the trouble",
        "Your body drives me insane and you know it",
        "Be my naughty little whore tonight"
      ]
    };

    /* ========== Simple sound toggle state ========== */
    let soundsEnabled = true; // we do small bleeps, not music synth
    document.getElementById("sound-btn").addEventListener("click", () => {
      soundsEnabled = !soundsEnabled;
      document.getElementById("sound-btn").textContent = soundsEnabled ? "üîä" : "üîà";
    });

    function bleep() {
      if (!soundsEnabled) return;
      // light haptic style using HTMLAudio tiny blank workaround omitted for simplicity
      // keep silent to avoid conflicts with mobile policies
    }

    /* ========== Background music controls (HTML audio only) ========== */
    const bgLoopEl = document.getElementById("bg-loop");
    let musicEnabled = false;

    async function startMusic() {
      if (musicEnabled) return;
      musicEnabled = true;
      try {
        bgLoopEl.volume = 0.2;
        await bgLoopEl.play();
      } catch (e) {
        // Autoplay may be blocked until further taps. It will play once user taps music button.
      }
      document.getElementById("music-btn").textContent = "üéµ";
    }
    function stopMusic() {
      musicEnabled = false;
      try { bgLoopEl.pause(); } catch(e){}
      document.getElementById("music-btn").textContent = "üîá";
    }
    function toggleMusic() { if (!musicEnabled) startMusic(); else stopMusic(); }
    document.getElementById("music-btn").addEventListener("click", toggleMusic, { passive: true });

    /* ========== Floating hearts ========== */
    const hearts = document.getElementById("hearts");
    function spawnHeart() {
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = ["üíï","üíñ","üíó","üåπ","üíù"][Math.floor(Math.random()*5)];
      h.style.left = Math.random() * 100 + "vw";
      h.style.top  = "-20px";
      h.style.animationDuration = (Math.random()*2 + 2.8) + "s";
      hearts.appendChild(h);
      setTimeout(()=>h.remove(), 4200);
    }
    setInterval(()=>{ if (Math.random() < 0.22) spawnHeart(); }, 900);

    /* ========== Screen switching ========== */
    const screens = {
      welcome: document.getElementById("welcome"),
      l1a: document.getElementById("level1a"),
      l1b: document.getElementById("level1b"),
      l2: document.getElementById("level2"),
      l3: document.getElementById("level3"),
      l4: document.getElementById("level4"),
      final: document.getElementById("final"),
    };
    function show(id) {
      document.querySelectorAll(".game-screen").forEach(s => s.classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    /* ========== Compliment Toasts ========== */
    function showToast(msg) {
      const t = document.createElement("div");
      t.className = "toast";
      t.textContent = msg;
      document.body.appendChild(t);
      setTimeout(()=> t.remove(), 2600);
    }
    // Random popups
    setInterval(() => {
      if (Math.random() < 0.12) {
        showToast(PERSONALIZATION.compliments[Math.floor(Math.random()*PERSONALIZATION.compliments.length)]);
      }
    }, 9000);

    /* ========== Start button ========== */
    document.getElementById("start-btn").addEventListener("click", () => {
      startMusic(); // first tap should unlock audio on phones
      bleep();
      show("level1a");
    }, { passive: true });

    // Compliment Boost
    document.getElementById("boost-btn").addEventListener("click", () => {
      showToast(PERSONALIZATION.compliments[Math.floor(Math.random()*PERSONALIZATION.compliments.length)]);
      bleep();
    }, { passive: true });

    /* ========== Level 1a ========== */
    document.querySelectorAll("#level1a .riddle-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const correct = btn.getAttribute("data-correct") === "true";
        const fb = document.getElementById("fb1a");
        if (correct) {
          fb.innerHTML = "<div class='flirty-message'>That is right, baby. You know me too well</div>";
          document.getElementById("progress1a").style.width = "35%";
          document.getElementById("to-1b").classList.remove("hidden");
          showToast(PERSONALIZATION.compliments[Math.floor(Math.random()*PERSONALIZATION.compliments.length)]);
        } else {
          fb.innerHTML = `<p style="color:#dc3545;">Think again, ${PERSONALIZATION.herName}</p>`;
        }
      }, { passive: true });
    });
    document.getElementById("to-1b").addEventListener("click", () => show("level1b"), { passive: true });

    /* ========== Level 1b ========== */
    document.querySelectorAll("#level1b .riddle-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const correct = btn.getAttribute("data-correct") === "true";
        const fb = document.getElementById("fb1b");
        if (correct) {
          fb.innerHTML = "<div class='flirty-message'>Apricot turnover. I will never forget that</div>";
          document.getElementById("progress1b").style.width = "50%";
          setTimeout(()=> show("level2"), 900);
        } else {
          fb.innerHTML = `<p style="color:#dc3545;">Close. Think of that first day</p>`;
        }
      }, { passive: true });
    });

    /* ========== Level 2 Memory ========== */
    const memoryGrid = document.getElementById("memory-grid");
    function initMemory(){
      const symbols = ["üíï","üíñ","üíó","üíù","üåπ","üíã","üòò","üî•"];
      const cards = [...symbols, ...symbols].sort(()=>Math.random()-0.5);
      memoryGrid.innerHTML = "";
      let flipped = [];
      let matchedPairs = 0;

      cards.forEach(sym => {
        const c = document.createElement("div");
        c.className = "memory-card";
        c.textContent = "‚ùì";
        c.dataset.sym = sym;
        c.addEventListener("click", () => {
          if (c.classList.contains("flipped") || c.classList.contains("matched")) return;
          if (flipped.length === 2) return;
          c.classList.add("flipped");
          c.textContent = sym;
          flipped.push(c);
          if (flipped.length === 2) {
            setTimeout(() => {
              const [a,b] = flipped;
              if (a.dataset.sym === b.dataset.sym) {
                a.classList.add("matched");
                b.classList.add("matched");
                matchedPairs++;
                document.getElementById("memory-message").textContent =
                  PERSONALIZATION.compliments[Math.floor(Math.random()*PERSONALIZATION.compliments.length)];
                if (matchedPairs === 8) {
                  document.getElementById("progress2").style.width = "70%";
                  setTimeout(()=> { initMaze(); show("level3"); }, 900);
                }
              } else {
                a.classList.remove("flipped"); b.classList.remove("flipped");
                a.textContent = "‚ùì"; b.textContent = "‚ùì";
              }
              flipped = [];
            }, 520);
          }
        }, { passive: true });
        memoryGrid.appendChild(c);
      });
    }
    // Initialize when entering level 2
    const observerL2 = new MutationObserver(() => {
      if (!screens.l2.classList.contains("hidden")) initMemory();
    });
    observerL2.observe(screens.l2, { attributes: true, attributeFilter: ["class"] });

    /* ========== Level 3 Maze ========== */
    const mazeGrid = document.getElementById("maze-grid");
    let player = [0,0];
    function initMaze(){
      const maze = [
        [1,1,0,0,0,1,1],
        [1,1,1,1,1,1,1],
        [0,0,0,1,0,0,0],
        [1,1,1,1,1,1,1],
        [1,0,0,0,0,0,1],
        [1,1,1,1,1,1,1],
        [0,0,0,1,0,0,2]
      ];
      mazeGrid.innerHTML = "";
      maze.forEach((row, r) => {
        row.forEach((val, c) => {
          const d = document.createElement("div");
          d.className = "maze-cell";
          d.dataset.r = r; d.dataset.c = c;
          if (val === 0) d.classList.add("maze-wall");
          if (val === 1) d.classList.add("maze-path");
          if (val === 2) { d.classList.add("maze-end"); d.textContent = "üåπ"; }
          d.addEventListener("click", () => movePlayer(r,c,maze), { passive: true });
          mazeGrid.appendChild(d);
        });
      });
      player = [0,0];
      drawPlayer();
    }
    function drawPlayer(){
      document.querySelectorAll(".maze-cell").forEach(cell => cell.classList.remove("maze-player"));
      const [r,c] = player;
      const el = document.querySelector(`.maze-cell[data-r="${r}"][data-c="${c}"]`);
      if (el) {
        el.classList.add("maze-player");
        if (!el.textContent) el.textContent = "üíï";
      }
    }
    function movePlayer(r,c,maze){
      const [pr, pc] = player;
      const dist = Math.abs(r - pr) + Math.abs(c - pc);
      if (dist !== 1) return;
      if (maze[r][c] === 0) return;
      player = [r,c];
      drawPlayer();
      if (maze[r][c] === 2) {
        document.getElementById("progress3").style.width = "90%";
        setTimeout(()=> show("level4"), 800);
      } else {
        if (Math.random() < 0.45) showToast(PERSONALIZATION.compliments[Math.floor(Math.random()*PERSONALIZATION.compliments.length)]);
      }
    }

    /* ========== Level 4 Cipher ========== */
    document.getElementById("cipher-btn").addEventListener("click", () => {
      const ans = document.getElementById("cipher-in").value.trim().toLowerCase();
      if (ans === PERSONALIZATION.secretWord) {
        document.getElementById("cipher-fb").innerHTML = '<div class="flirty-message">Perfect decode üíï</div>';
        document.getElementById("progress4").style.width = "100%";
        setTimeout(()=> show("final"), 900);
      } else {
        document.getElementById("cipher-fb").innerHTML = '<p style="color:#dc3545;">Almost there</p>';
      }
    }, { passive: true });

    /* ========== Final actions ========== */
    document.getElementById("celebrate").addEventListener("click", () => {
      for (let i = 0; i < 22; i++) setTimeout(spawnHeart, i*90);
    }, { passive: true });
    document.getElementById("restart").addEventListener("click", () => {
      show("welcome");
      document.getElementById("cipher-in").value = "";
    }, { passive: true });
  </script>
</body>
</html>
